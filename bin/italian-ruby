#!/usr/bin/env ruby
# frozen_string_literal: true

require_relative "../lib/italian/ruby/traduttore"
require "rubygems"

if ARGV[0].nil?
  puts <<~EOS
    Esegue un file scritto in Italian Ruby. Sintassi:
    italian-ruby file.ir
  EOS
else
  ARGV.each do |file|
    next unless file

    italian_ruby = Italian::Ruby::Traduttore.new
    codice = File.read file, encoding: "UTF-8"
    codice_ruby = italian_ruby.traduci codice
    raise "La traduzione di Italian Ruby richiede almeno versione 2.4 di Ruby." if
      Gem::Version.new(RUBY_VERSION) < Gem::Version.new("2.3")

    eval codice_ruby
  end
end